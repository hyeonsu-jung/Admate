# RAG 기반 문서 검색 챗봇 — 기능 개발 요청서

---

## 1. 개요

### 1.1 배경 및 문제 정의

현재 광고 운영 업무 수행 시, 단가표에서 단가/수수료 확인, 소재전달기한 파악, 상품별 제작가이드 참조 등 다양한 문서를 반복적으로 확인해야 합니다. 이 과정에서 다음과 같은 문제가 발생하고 있습니다:

- 확인해야 할 문서(PDF, Excel)의 수량이 많고 파일별 페이지가 방대함
- 필요한 정보를 찾기 위해 여러 문서를 일일이 열어 검색해야 하는 비효율 발생
- 같은 정보에 대한 반복 문의로 인한 업무 시간 손실
- 신규 입사자 또는 타 부서 담당자의 문서 접근성 부족

### 1.2 목적

RAG(Retrieval-Augmented Generation) 기반의 챗봇을 개발하여, 등록된 PDF 및 Excel 문서를 기반으로 사용자 질문에 정확한 답변을 생성하는 기능을 구축합니다. 이를 통해 문서 검색 시간을 대폭 단축하고 업무 효율성을 향상시키고자 합니다.

### 1.3 기대 효과

| 항목 | AS-IS (현재) | TO-BE (개선 후) |
|------|-------------|----------------|
| 정보 확인 소요시간 | 평균 10~30분 | 1분 이내 즉시 응답 |
| 문서 검색 방식 | 수동 파일 열람 및 페이지 탐색 | 챗봇 자연어 질문으로 자동 검색 |
| 신규자 접근성 | 별도 교육 및 가이드 필요 | 챗봇 질문으로 즉시 확인 가능 |
| 정보 정확도 | 담당자별 해석 차이 발생 가능 | 원문 기반 일관된 응답 제공 |

---

## 2. 기능 요구사항

### 2.1 문서 관리 기능

| 구분 | 기능 설명 | 상세 요구사항 |
|------|----------|-------------|
| 파일 업로드 | PDF, Excel(.xlsx/.xls) 파일 업로드 및 등록 | 드래그&드롭 또는 파일선택 방식 지원, 복수 파일 동시 업로드 가능, 파일 용량 제한 설정 (ex. 50MB) |
| 문서 파싱 | 업로드된 문서에서 텍스트, 테이블, 이미지 내 텍스트 추출 | PDF: 텍스트/테이블/이미지 OCR 처리, Excel: 시트별 데이터 추출, 병합셀/수식 처리 지원 |
| 문서 관리 | 등록된 문서 목록 조회, 삭제, 버전 관리 | 문서별 업로드 일시/상태 표시, 문서 교체(재업로드) 시 임베딩 자동 갱신, 카테고리/태그 분류 기능 |

### 2.2 RAG 기반 챗봇 기능

| 구분 | 기능 설명 | 상세 요구사항 |
|------|----------|-------------|
| 자연어 질문 | 사용자가 자연어로 질문하면 관련 문서 검색 후 답변 생성 | 한국어 자연어 처리, 문맥 이해 기반 검색, 멀티턴 대화 지원 |
| 답변 생성 | 검색된 문서 컨텍스트 기반으로 정확한 답변 생성 | 출처 문서명 및 페이지 번호 표시, 답변 신뢰도 점수 표시, 할루시네이션 방지 (문서에 없는 정보 응답 방지) |
| 검색 범위 | 전체 문서 또는 특정 문서/카테고리 대상 검색 | 검색 범위 필터링 (전체/특정 문서/카테고리별), 상품명/미디어명 등 키워드 기반 필터링 |

### 2.3 사용자 인터페이스 (UI)

- 챗봇 형태의 대화형 인터페이스
- 질문 입력창 및 답변 표시 영역
- 참조 문서 출처 표시 (Click 시 원문 이동 또는 미리보기)
- 대화 이력 저장 및 조회 기능
- 자주 묻는 질문 추천 (FAQ) 기능

---

## 3. 기술 요구사항

### 3.1 시스템 아키텍처 (권장)

아래는 권장 아키텍처이며, 개발부서 판단에 따라 조정 가능합니다.

| 구성 요소 | 권장 기술 | 비고 |
|----------|----------|------|
| 문서 파싱 | Apache Tika, PyMuPDF, Unstructured | PDF 테이블/이미지 OCR 처리 포함 |
| 텍스트 청킹 | Recursive Character Splitter | 청크 사이즈 500~1000 토큰, 오버랩 100~200 토큰 권장 |
| 임베딩 모델 | OpenAI text-embedding-3-small 또는 Cohere embed-v3 | 한국어 성능 우수한 모델 선택 |
| 벡터 DB | Pinecone, Weaviate, 또는 Qdrant | 클라우드 관리형 벡터 DB 권장 |
| LLM | Claude (Anthropic) 또는 GPT-4o (OpenAI) | 한국어 답변 품질 및 비용 고려 |
| 백엔드 | Python (FastAPI) 또는 Node.js | API 서버 및 문서 처리 파이프라인 |
| 프론트엔드 | React / Next.js | Admate 플랫폼 통합 시 기존 기술스택 따름 |

### 3.2 RAG 파이프라인 흐름

1. **문서 업로드** — 사용자가 PDF/Excel 파일을 업로드
2. **문서 파싱** — 텍스트, 테이블, 이미지(OCR) 추출
3. **텍스트 청킹** — 추출된 텍스트를 적절한 크기로 분할
4. **임베딩 생성** — 각 청크를 벡터로 변환하여 벡터 DB에 저장
5. **질문 입력** — 사용자가 챗봇에 자연어로 질문
6. **벡터 검색** — 질문을 임베딩하여 유사도 기반으로 관련 청크 검색 (Top-K)
7. **LLM 답변 생성** — 검색된 청크를 컨텍스트로 포함하여 LLM이 답변 생성
8. **출처 표시** — 답변과 함께 참조 문서명/페이지 표시

---

## 4. 예상 사용 시나리오

| No. | 질문 예시 | 기대 답변 |
|-----|----------|----------|
| 1 | "XX 상품의 1회 단가가 얼마예요?" | 단가표 문서에서 해당 상품 단가 검색 후 금액 및 참조 페이지 응답 |
| 2 | "네이버 브랜드검색 수수료율이 얼마죠?" | 해당 미디어 수수료 정보 검색 후 수수료율 및 조건 응답 |
| 3 | "소재 전달 기한이 언제까지예요?" | 가이드 문서에서 소재전달기한 검색 후 날짜 및 조건 응답 |
| 4 | "XX 상품 배너 제작 가이드 알려주세요" | 제작가이드 문서에서 해당 상품 사이즈/용량/제작조건 검색 후 응답 |
| 5 | "XX 미디어와 YY 미디어 단가 비교해주세요" | 복수 문서에서 비교 데이터 검색 후 표 형태로 비교 응답 |

---

## 5. 비기능 요구사항

| 항목 | 요구사항 |
|------|---------|
| 응답 속도 | 질문 후 5초 이내 응답 시작 (Streaming 방식 권장) |
| 정확도 | 문서 기반 답변 정확도 90% 이상, 할루시네이션 발생율 5% 이하 목표 |
| 동시 접속 | 최소 20명 동시 사용 지원 |
| 보안 | 문서 접근 권한 관리, API Key 암호화, 사용자 인증 연동 |
| 확장성 | 문서 수 증가에 따른 벡터 DB 스케일링 가능, 추후 다른 파일 형식(PPT, HWP 등) 확장 가능한 구조 |
| 모니터링 | 질문/답변 로그 기록, LLM 토큰 사용량 추적, 사용자별 이용 통계 |

---

## 6. 일정 및 마일스톤 (안)

아래 일정은 예상 일정이며, 개발부서와 협의를 통해 조정 가능합니다.

| 단계 | 기간 (예상) | 주요 작업 | 산출물 |
|------|-----------|----------|--------|
| 1 | 1주차 | 요구사항 확정 및 기술 검토 | 기술 설계서 |
| 2 | 2~3주차 | 문서 파싱 및 임베딩 파이프라인 개발 | 문서 처리 모듈 |
| 3 | 4~5주차 | RAG 검색 및 LLM 답변 생성 개발 | RAG API |
| 4 | 6~7주차 | 챗봇 UI 개발 및 플랫폼 통합 | 챗봇 UI |
| 5 | 8주차 | 테스트, QA 및 정확도 개선 | QA 리포트 |
| 6 | 9주차~ | 운영 배포 및 모니터링 | 운영 가이드 |

---

## 7. 참고사항 및 협의 요청

### 7.1 개발부서 협의 필요 사항

- LLM 서비스 선정 및 API 비용 예산 확보 방안
- 벡터 DB 선정 및 인프라 구성 방안 (클라우드 vs 온프레미스)
- Admate 플랫폼 통합 방식 (임베디드 vs 별도 페이지)
- 기존 사용자 인증 시스템과의 연동 방안
- 문서 업데이트 시 임베딩 갱신 전략 (전체 재생성 vs 증분 업데이트)

### 7.2 운영부서 제공 예정 사항

- 테스트용 샘플 문서 (단가표, 수수료표, 제작가이드 등) 제공
- QA 테스트용 질문-정답 셋 작성 협조
- UAT(사용자 수용 테스트) 참여 및 피드백 제공

### 7.3 예상 비용 항목

- LLM API 호출 비용 (월 예상 사용량 기준 산정 필요)
- 임베딩 API 비용
- 벡터 DB 호스팅 비용
- 서버 인프라 비용 (클라우드 서버 또는 서버리스)

---

> 본 문서는 개발부서와의 초기 협의를 위한 기능 요청서이며, 세부 기술 사양은 협의 과정에서 조정될 수 있습니다.
